<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>有态度</title>
  
  <subtitle>阅读，学习，思考，写作，独立</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-11-28T10:04:18.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>刘凯召</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>破解x-pack</title>
    <link href="http://yoursite.com/2017/11/28/%E7%A0%B4%E8%A7%A3x-pack/"/>
    <id>http://yoursite.com/2017/11/28/破解x-pack/</id>
    <published>2017-11-28T09:48:33.000Z</published>
    <updated>2017-11-28T10:04:18.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="x-pack-安装步骤如下"><a href="#x-pack-安装步骤如下" class="headerlink" title="x-pack 安装步骤如下:"></a>x-pack 安装步骤如下:</h1><h3 id="1-在ES5-0安装-X-PACK"><a href="#1-在ES5-0安装-X-PACK" class="headerlink" title="1.在ES5.0安装 X-PACK"></a>1.在ES5.0安装 X-PACK</h3><p>bin/elasticsearch-plugin install x-pack</p><p>如果不需要该插件，也可以通过非常简单的方式删除：</p><p>bin/elasticsearch-plugin remove x-pack</p><a id="more"></a><h3 id="2-在kibana5-0中安装X-PACK"><a href="#2-在kibana5-0中安装X-PACK" class="headerlink" title="2.在kibana5.0中安装X-PACK"></a>2.在kibana5.0中安装X-PACK</h3><p>bin/kibana-plugin install x-pack</p><p>卸载：bin/kibana-plugin remove x-pack</p><p>安装成功后重启ElasticSearch和Kibana：</p><p>以上安装之后，就会发现ES的访问和Kibana的访问都受到限制</p><p>默认的用户名和密码：</p><p>用户名：elastic</p><p>密码：changeme</p><p>登录到Kibana会发现 elastic是一个最高级别的user，拥有所有权限，其角色是superuser。</p><p>elasticsearch和kibana默认是受限可一修改配置文件来取消限制。具体参见 ：<a href="https://www.elastic.co/guide/en/x-pack/current/installing-xpack.html" target="_blank" rel="noopener">https://www.elastic.co/guide/en/x-pack/current/installing-xpack.html</a></p><p>登录时不让输入用户和密码，提示license不允许，免费的license只有一年时间，找了一下,可以破解，步骤如下：</p><h5 id="1-破解并安装"><a href="#1-破解并安装" class="headerlink" title="1: 破解并安装"></a>1: 破解并安装</h5><p>下载x-pack-5.2.0.zip，</p><p>解压并找到x-pack-5.2.0.jar。这里使用JD-GUI是无法反编译的，</p><p>我使用的是Luyten(下载地址：<a href="https://github.com/deathmarine/Luyten/releases/tag/v0.5.0）进行反编译。" target="_blank" rel="noopener">https://github.com/deathmarine/Luyten/releases/tag/v0.5.0）进行反编译。</a></p><p>将org.elasticsearch/license/LicenseVerifier.class反编译并保存出来。这个类是检查license完整性的类，我们使其始终返回true，就可以任意修改license并导入。将其改为：</p><p>package org.elasticsearch.license;</p><p><code>import java.nio.*;</code></p><p><code>import java.util.*;</code></p><p><code>import java.security.*;</code></p><p><code>import org.elasticsearch.common.xcontent.*;</code></p><p><code>import org.apache.lucene.util.*;</code></p><p><code>import org.elasticsearch.common.io.*;</code></p><p><code>import java.io.*;</code></p><p><code>public class LicenseVerifier</code></p><p><code>{</code></p><p><code>public static boolean verifyLicense(final License license, final byte[] encryptedPublicKeyData) {</code></p><p><code>return true;</code></p><p><code>}</code></p><p><code>public static boolean verifyLicense(final License license) {</code></p><p><code>return true;</code></p><p><code>}</code></p><p><code>}</code></p><p>注：红色的部分可以都不要</p><p>然后需要重新编译class文件。注意这里我们无需编译整个工程，将原来的x-pack-5.2.0.jar和依赖包加入CLASSPATH，即可完成单个文件的编译。实际上只用到了3个依赖包，如果是用RPM或DEB安装的，直接运行：</p><p>javac -cp “e:/tools/linux/elasticsearch/5.0/elasticsearch-5.0.0.jar;e:/tools/linux/elasticsearch/5.0/lucene-core-6.2.0.jar;E:/tools/linux/elasticsearch/5.0/x-pack-5.0.0/elasticsearch/x-pack-5.0.0.jar” LicenseVerifier.java</p><p>注：javac执行时的参数cp 表示classpath 路径，如果多个在windows环境中用 ; 隔开，linux中用 : 隔开；</p><p>把x-pack-5.2.0.jar用压缩文件管理器打开，将里面的LicenseVerifier.class替换掉。再把破解了的jar包部署到各节点上，</p><p>将破解的.zip文件安装到服务器,启动 elasticsearch,kibana，并重启集群。安装新的之前要现将已经安装的删除。</p><p>./bin/elasticsearch-plugin remove x-pack</p><p>./bin/elasticsearch-plugin install file:///srv/x-pack-5.4.1.zip</p><p>./bin/kibana-plugin install file:///srv/x-pack-5.4.1.zip</p><p>申请一个免费license(<a href="https://license.elastic.co/registration" target="_blank" rel="noopener">https://license.elastic.co/registration</a>) 注册后可以下载文件,下载后修改，例如：</p><p>主要修改：type改为platinum表示可以使用所有功能 ; expiry_date_in<em>millis  我这里改了10年 ^</em>^</p><p><code>{&quot;license&quot;:{&quot;uid&quot;:&quot;10cf8263-4d23-4e81-b10b-95abfb14b599&quot;,&quot;type&quot;:&quot;platinum&quot;,&quot;issue_date_in_millis&quot;:1490832000000,&quot;expiry_date_in_millis&quot;:1806237751991,&quot;max_nodes&quot;:100,&quot;issued_to&quot;:&quot;www bbb (baiye)&quot;,&quot;issuer&quot;:&quot;Web Form&quot;,&quot;signature&quot;:&quot;+2yc0QcB&quot;,&quot;start_date_in_millis&quot;:1490832000000}}</code></p><p>``【安装license】</p><p>查看当前的license</p><p><code>[root@localhost Downloads]# curl -XGET -u elastic:changeme &#39;http://192.168.100.50:9200/_license&#39;</code></p><p>将编辑好的license.json文件放到服务器，在文件目录下执行：</p><p><code>[root@localhost Downloads]#curl -XPUT -u elastic:changeme &#39;http://192.168.100.50:9200/_xpack/license&#39; -d @license.json</code></p><p>或者下面：</p><p><code>[root@localhost Downloads]#curl -XPUT -u elastic:changeme &#39;http://192.168.100.50:9200/_xpack/license?acknowledge=true&#39; -d @license.json</code></p><p>重启elasticsearch和kibana .</p><p>打开：<a href="http://192.168.100.50:5601/login" target="_blank" rel="noopener">http://192.168.100.50:5601/login</a>  可正常登录。</p><p> <img src="/Users/liukaizhao/Downloads/headImg.jpeg" alt="headImg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;x-pack-安装步骤如下&quot;&gt;&lt;a href=&quot;#x-pack-安装步骤如下&quot; class=&quot;headerlink&quot; title=&quot;x-pack 安装步骤如下:&quot;&gt;&lt;/a&gt;x-pack 安装步骤如下:&lt;/h1&gt;&lt;h3 id=&quot;1-在ES5-0安装-X-PACK&quot;&gt;&lt;a href=&quot;#1-在ES5-0安装-X-PACK&quot; class=&quot;headerlink&quot; title=&quot;1.在ES5.0安装 X-PACK&quot;&gt;&lt;/a&gt;1.在ES5.0安装 X-PACK&lt;/h3&gt;&lt;p&gt;bin/elasticsearch-plugin install x-pack&lt;/p&gt;
&lt;p&gt;如果不需要该插件，也可以通过非常简单的方式删除：&lt;/p&gt;
&lt;p&gt;bin/elasticsearch-plugin remove x-pack&lt;/p&gt;
    
    </summary>
    
      <category term="ELK" scheme="http://yoursite.com/categories/ELK/"/>
    
    
      <category term="ELK" scheme="http://yoursite.com/tags/ELK/"/>
    
      <category term="数据" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2017/11/28/hello-world/"/>
    <id>http://yoursite.com/2017/11/28/hello-world/</id>
    <published>2017-11-28T03:24:47.000Z</published>
    <updated>2017-11-28T10:05:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
